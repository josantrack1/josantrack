<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack Pro | All Transactions</title>
    <!-- Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#2d3748">
</head>
<body>
    <main>
        <!-- The sidebar is a common component across all pages -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <!-- App logo and title -->
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-banknote">
                    <rect width="20" height="12" x="2" y="6" rx="2"/>
                    <circle cx="12" cy="12" r="2"/>
                    <path d="M6 12h.01"/>
                    <path d="M18 12h.01"/>
                </svg>
                <span class="app-title">FinTrack Pro</span>
            </div>

            <!-- Business selection dropdown is needed for all transactions -->
            <div class="sidebar-section">
                <label for="business-select" class="block text-sm font-medium">Select Business</label>
                <select id="business-select" class="dropdown mt-1">
                    <option value="all-businesses">All Businesses</option>
                </select>
            </div>

            <!-- Navigation links -->
            <nav class="sidebar-nav">
                <a href="index.html" class="nav-link">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard">
                        <rect x="3" y="3" width="7" height="9"/>
                        <rect x="14" y="3" width="7" height="5"/>
                        <rect x="14" y="12" width="7" height="9"/>
                        <rect x="3" y="16" width="7" height="5"/>
                    </svg>
                    Dashboard
                </a>
                <a href="house.html" class="nav-link">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home">
                        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </svg>
                    House Expenses
                </a>
                <a href="transactions.html" class="nav-link active">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-receipt-text">
                        <path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"/>
                        <path d="M14 8H8"/>
                        <path d="M16 12H8"/>
                        <path d="M16 16H8"/>
                    </svg>
                    All Transactions
                </a>
            </nav>

            <!-- Optional Dark Mode Toggle -->
            <div class="theme-toggle">
                <button id="theme-toggle-btn" aria-label="Toggle dark mode">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucude-moon">
                        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main content area -->
        <section class="main-content">
            <header class="main-header">
                <h1 class="page-title">All Transactions</h1>
                <div class="header-actions">
                    <button id="add-entry-btn" class="btn btn-primary" data-type="all">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus-circle">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 12h8"/>
                            <path d="M12 8v8"/>
                        </svg>
                        Add Transaction
                    </button>
                </div>
            </header>
            
            <div id="transactions-content">
                <!-- Date Filters -->
                <div class="card filter-controls mb-6">
                    <div class="filter-group">
                        <label for="start-date-all">Start Date</label>
                        <input type="date" id="start-date-all">
                    </div>
                    <div class="filter-group">
                        <label for="end-date-all">End Date</label>
                        <input type="date" id="end-date-all">
                    </div>
                </div>

                <!-- Additional Filter Controls -->
                <div class="card filter-controls mb-6">
                    <div class="filter-group">
                        <label for="search-input">Search Title</label>
                        <input type="text" id="search-input" placeholder="Search by title...">
                    </div>
                    <div class="filter-group">
                        <label for="category-filter-select">Category</label>
                        <select id="category-filter-select">
                            <option value="all">All Categories</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="type-filter-select">Type</label>
                        <select id="type-filter-select">
                            <option value="all">All Types</option>
                            <option value="income">Income</option>
                            <option value="expense">Expense</option>
                        </select>
                    </div>
                </div>

                <!-- Transactions Table -->
                <div class="card transactions-table-card">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Business</th>
                                    <th>Category</th>
                                    <th>Date</th>
                                    <th class="text-right">Amount</th>
                                    <th class="text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="full-transactions-table-body">
                                <!-- Transaction rows will be rendered here by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- The Add/Edit Entry Modal -->
    <div id="add-entry-modal" class="modal-overlay hidden">
        <div class="modal card">
            <div class="modal-header">
                <h3 id="modal-title" class="card-title">Add New Transaction</h3>
                <button id="close-modal-btn" class="close-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                        <path d="M18 6 6 18"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
            <form id="add-transaction-form" class="mt-4">
                <input type="hidden" id="transaction-id">
                <input type="hidden" id="transaction-type-hidden">
                
                <div class="form-group flex-row" id="type-radio-buttons">
                    <div class="radio-group">
                        <input type="radio" id="type-income" name="transaction-type" value="income" required checked>
                        <label for="type-income" class="radio-label">Income</label>
                    </div>
                    <div class="radio-group">
                        <input type="radio" id="type-expense" name="transaction-type" value="expense" required>
                        <label for="type-expense" class="radio-label">Expense</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="transaction-title">Title</label>
                    <input type="text" id="transaction-title" placeholder="e.g. Fuel for Truck AB-123" required>
                </div>
                
                <div id="business-fields">
                    <div class="form-group">
                        <label for="transaction-business">Business</label>
                        <select id="transaction-business" required>
                            <!-- Options will be populated by JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transaction-category">Category</label>
                        <select id="transaction-category" required>
                            <!-- Options will be populated by JS -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="transaction-amount">Amount</label>
                    <input type="number" id="transaction-amount" placeholder="e.g. 7500" required>
                </div>
                <div class="form-group">
                    <label for="transaction-date">Date</label>
                    <input type="date" id="transaction-date" required>
                </div>
                
                <div class="form-actions mt-6">
                    <button type="submit" id="modal-submit-btn" class="btn btn-primary">Add Transaction</button>
                    <button type="button" id="cancel-modal-btn" class="btn btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- The Delete Confirmation Modal -->
    <div id="delete-modal" class="modal-overlay hidden">
        <div class="modal card">
            <h3 class="card-title">Confirm Deletion</h3>
            <p class="mt-4">Are you sure you want to delete this transaction? This action cannot be undone.</p>
            <div class="form-actions mt-6">
                <button id="confirm-delete-btn" class="btn btn-primary">Delete</button>
                <button id="cancel-delete-btn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>